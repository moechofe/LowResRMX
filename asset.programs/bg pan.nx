SUB VEC2(X,Y,V1,V2)
TEXT X,Y,LEFT$(STR$(V1)+"   ",4)+","+LEFT$(STR$(V2)+"   ",4)
END SUB

PRESSEDX=0
PRESSEDY=0

BGX=0
BGY=0

VIEWX=10
VIEWY=10

mapx=0
mapy=0
mapw=20
maph=16

DO
  CLS

  IF TAP THEN

    PRESSEDX=TOUCH.X
    PRESSEDY=TOUCH.Y

    OBGX=BGX
    OBGY=BGY

    omapx=mapx
    omapy=mapy

  ELSE IF TOUCH THEN

    DISTX=TOUCH.X-PRESSEDX
    DISTY=TOUCH.Y-PRESSEDY

    BGX=OBGX-DISTx
    'BGY=OBGY-DISTY

    mapx=omapx-distx
    'mapy=omapy-disty

    VIEWX=10
    VIEWY=10
    if BGX mod 8 then inc VIEWX
    if BGY mod 8 then inc VIEWY

    SCROLL 3,BGX,BGY

  END IF

  BG 3
  BG COPY mapx/8, mapy/8, VIEWX, VIEWY TO 8+mapx/8, 8+mapy/8

  BG 2

  TEXT 0,20,"PRESSED:"
  TEXT 10,20,STR$(PRESSEDX)
  TEXT 10,21,STR$(PRESSEDY)

  TEXT 0,22,"TOUCH:"
  TEXT 10,22,STR$(TOUCH.X)
  TEXT 10,23,STR$(TOUCH.Y)

  text 0,25,"BG POS:"
  TEXT 10,25,STR$(BGX)
  TEXT 10,26,STR$(BGY)

  text 0,28,"VIEW:"
  text 10,28,STR$(VIEWX)
  text 10,29,STR$(VIEWY)

  text 0,31,"map:"
  text 10,31,STR$(mapX)
  text 10,32,STR$(mapY)

  BG 0
  CELL 7,7,5

  flip 1,1
  cell 18,18,5
  flip 0,0

  CALL VEC2(2,6,BGX,BGY)

WAIT VBL
LOOP

#2:MAIN CHARACTERS
00000000000000000000000000000000
FFFFFF0000000000000000FF00000000
E0E0E0E0E0E0E0E01010101010101010
FFFFFFE0E0E0E0E00000001F10101010
00000018180000000000183C3C180000
834323130B03FFFF834323130B03FFFF

#3:MAIN BG
00001410030001000100010001000100
01000100010001000100010001000100
01000100010001000100030802000402
00000401000004020000040100000401
04010000040100000402000004010000
04020208020000000000000000000000
00000000000000000000000000000000
00000000000000000000020802000401
00000402000004010000040200000403
04030000040200000401000004020000
04010208020000000000000000000000
00000000000000000000000000000000
00000000000000000000020802000402
00000401000004020000040100000403
04030000040100000402000004010000
04020208020000000000000000000000
00000000000000000000000000000000
00000000000000000000020802000401
00000402000004010000040200000403
04030000040200000401000004020000
04010208020000000000000000000000
00000000000000000003000000000000
00000000000000000000020802000000
00000000000000000000000000000000
00030000000000000000000000000000
00000208020004020000040100000402
00000401000004030403000004010000
04020000040100000402020802000000
00000000000000000000000000030003
00030000000000000000000000000000
00000208020004010000040200000401
00000402000004030403000004020000
04010000040200000401020802000000
00000000000000000000000000000000
00000000000000000000000000000000
00000208020004020000040100000402
00000401000004010401000004010000
04020000040100000402020803100110
01100110011001100110011001100110
01100110011001100110011001100110
01100318

